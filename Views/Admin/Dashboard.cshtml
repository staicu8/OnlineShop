@model dynamic
@{ ViewData["Title"] = "Admin Dashboard"; }

<div class="mb-4">
    <h1>‚öôÔ∏è Admin Dashboard</h1>
    <p class="text-muted">Gestionare shop »ôi analize v√¢nzƒÉri</p>
</div>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Total V√¢nzƒÉri</h6>
                <h3 class="text-primary">@ViewBag.TotalSales.ToString("F2") RON</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Comenzi</h6>
                <h3 class="text-success">@ViewBag.TotalOrders</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Produse</h6>
                <h3 class="text-info">@ViewBag.TotalProducts</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Utilizatori</h6>
                <h3 class="text-warning">@ViewBag.TotalUsers</h3>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Comenzi Recente</h5>
            </div>
            <div class="table-responsive">
                <table class="table table-sm mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>ID</th>
                            <th>Utilizator</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var order in ViewBag.RecentOrders)
                        {
                            <tr>
                                <td>#@order.Id</td>
                                <td>@order.User?.FirstName @order.User?.LastName</td>
                                <td>@order.TotalAmount.ToString("F2") RON</td>
                                <td><span class="badge bg-info">@order.Status</span></td>
                                <td>@order.CreatedAt.ToString("dd.MM.yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">Produse cu Stoc Mic</h5>
            </div>
            <div class="table-responsive">
                <table class="table table-sm mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Produs</th>
                            <th>Stoc</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var product in ViewBag.LowStockProducts)
                        {
                            <tr>
                                <td>@product.Title</td>
                                <td>
                                    @if (product.Stock <= 5)
                                    {
                                        <span class="badge bg-danger">@product.Stock</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-warning">@product.Stock</span>
                                    }
                                </td>
                                <td>
                                    <a href="@Url.Action("EditProduct", "Admin", new { id = product.Id })" class="btn btn-sm btn-primary">EditeazƒÉ</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header bg-dark text-white">
        <h5 class="mb-0">Gestiune</h5>
    </div>
    <div class="card-body">
        <a href="@Url.Action("Products", "Admin")" class="btn btn-outline-primary">üì¶ Gestiune Produse</a>
        <a href="@Url.Action("Categories", "Admin")" class="btn btn-outline-secondary">üìÇ Categorii</a>
        <a href="@Url.Action("Orders", "Admin")" class="btn btn-outline-success">üìã Comenzi</a>
        <a href="@Url.Action("Reviews", "Admin")" class="btn btn-outline-warning">üìù Review-uri</a>
        <a href="@Url.Action("Users", "Admin")" class="btn btn-outline-info">üë• Utilizatori</a>
    </div>
</div>
